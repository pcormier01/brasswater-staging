!function(e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=e:e()}(function(){function e(e){return e[D]||(e[D]={})}function t(t,n,o,i,a){function c(e){o(e,i)}n=n.split(j);for(var r,u=e(t),s=n.length;s--;)(u[r=n[s]]||(u[r]=[])).push([o,c]),t.addEventListener(r,c)}function n(t,n,o,i){n=n.split(j);var a,c,r,u=e(t),s=n.length;if(u)for(;s--;)if(a=n[s],c=u[a])for(r=c.length;r--;)c[r][0]===o&&(t.removeEventListener(a,c[r][1]),c.splice(r,1))}function o(e,t,n){var o=function(e){return new CustomEvent(e,K)}(t);n&&C(o,n),e.dispatchEvent(o)}function i(){}function a(e){e.preventDefault()}function c(e,t){var n,o;if(e.identifiedTouch)return e.identifiedTouch(t);for(n=-1,o=e.length;++n<o;)if(e[n].identifier===t)return e[n]}function r(e,t){var n=c(e.changedTouches,t.identifier);if(n&&(n.pageX!==t.pageX||n.pageY!==t.pageY))return n}function u(e){(function(e){return 1===e.which&&!e.ctrlKey&&!e.altKey})(e)&&(function(e){return!!k[e.target.tagName.toLowerCase()]}(e)||(t(document,S.move,s,e),t(document,S.cancel,d,e)))}function s(e,t){v(e,t,e,l)}function d(e,t){l()}function l(){n(document,S.move,s),n(document,S.cancel,d)}function f(e){if(!k[e.target.tagName.toLowerCase()]){var n=e.changedTouches[0],o={target:n.target,pageX:n.pageX,pageY:n.pageY,identifier:n.identifier,touchmove:function(e,t){!function(e,t){var n=r(e,t);if(!n)return;v(e,t,n,m)}(e,t)},touchend:function(e,t){!function(e,t){if(!c(e.changedTouches,t.identifier))return;m(t)}(e,t)}};t(document,x.move,o.touchmove,o),t(document,x.cancel,o.touchend,o)}}function m(e){n(document,x.move,e.touchmove),n(document,x.cancel,e.touchend)}function v(e,t,n,a){var c=n.pageX-t.pageX,r=n.pageY-t.pageY;c*c+r*r<T*T||function(e,t,n,a,c,r){var u=e.targetTouches,s=e.timeStamp-t.timeStamp,d={altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,startX:t.pageX,startY:t.pageY,distX:a,distY:c,deltaX:a,deltaY:c,pageX:n.pageX,pageY:n.pageY,velocityX:a/s,velocityY:c/s,identifier:t.identifier,targetTouches:u,finger:u?u.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=i,e.preventDefault()}};o(t.target,"movestart",d),r(t)}(e,t,n,c,r,a)}function p(e,t){var n=t.timer;t.touch=e,t.timeStamp=e.timeStamp,n.kick()}function h(e,t){var o=t.target,i=t.event,c=t.timer;n(document,S.move,p),n(document,S.end,h),w(o,i,c,function(){setTimeout(function(){n(o,"click",a)},0)})}function g(e,t){var o=t.target,i=t.event,a=t.timer;c(e.changedTouches,i.identifier)&&(!function(e){n(document,x.move,e.activeTouchmove),n(document,x.end,e.activeTouchend)}(t),w(o,i,a))}function w(e,t,n,i){n.end(function(){return o(e,"moveend",t),i&&i()})}function X(e){if(!e.defaultPrevented&&e.moveEnabled){var n={startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},i={target:e.target,event:n,timer:new function(e){function t(e){o?(n(),E(t),i=!0,o=!1):i=!1}var n=e,o=!1,i=!1;this.kick=function(e){o=!0,i||t()},this.end=function(e){var t=n;e&&(i?(n=o?function(){t(),e()}:e,o=!0):e())}}(function(e){!function(e,t,n){var o=i.timeStamp-e.timeStamp;e.distX=t.pageX-e.startX,e.distY=t.pageY-e.startY,e.deltaX=t.pageX-e.pageX,e.deltaY=t.pageY-e.pageY,e.velocityX=.3*e.velocityX+.7*e.deltaX/o,e.velocityY=.3*e.velocityY+.7*e.deltaY/o,e.pageX=t.pageX,e.pageY=t.pageY}(n,i.touch),o(i.target,"move",n)}),touch:void 0,timeStamp:e.timeStamp};void 0===e.identifier?(t(e.target,"click",a),t(document,S.move,p,i),t(document,S.end,h,i)):(i.activeTouchmove=function(e,t){!function(e,t){var n=t.event,o=t.timer,i=r(e,n);i&&(e.preventDefault(),n.targetTouches=e.targetTouches,t.touch=i,t.timeStamp=e.timeStamp,o.kick())}(e,t)},i.activeTouchend=function(e,t){g(e,t)},t(document,x.move,i.activeTouchmove,i),t(document,x.end,i.activeTouchend,i))}}function Y(e){e.enableMove()}function b(e){e.enableMove()}function y(e){e.enableMove()}function _(e){var t=e.handler;e.handler=function(e){for(var n,o=M.length;o--;)e[n=M[o]]=e.originalEvent[n];t.apply(this,arguments)}}var C=Object.assign||window.jQuery&&jQuery.extend,T=8,E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(function(){e()},25)};!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}();var k={textarea:!0,input:!0,select:!0,button:!0},S={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},x={move:"touchmove",cancel:"touchend",end:"touchend"},j=/\s+/,K={bubbles:!0,cancelable:!0},D="function"==typeof Symbol?Symbol("events"):{};if(t(document,"mousedown",u),t(document,"touchstart",f),t(document,"movestart",X),window.jQuery){var M="startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY".split(" ");jQuery.event.special.movestart={setup:function(){return t(this,"movestart",Y),!1},teardown:function(){return n(this,"movestart",Y),!1},add:_},jQuery.event.special.move={setup:function(){return t(this,"movestart",b),!1},teardown:function(){return n(this,"movestart",b),!1},add:_},jQuery.event.special.moveend={setup:function(){return t(this,"movestart",y),!1},teardown:function(){return n(this,"movestart",y),!1},add:_}}}),function(e){e.fn.utcomparison=function(t){t=e.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"",after_label:"",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1},t);return this.each(function(){var n=t.default_offset_pct,o=e(this),i=t.orientation,a="vertical"===i?"down":"left",c="vertical"===i?"up":"right",r=t.default_offset_pct;o.wrap("<div class='ut-comparison-wrapper ut-comparison-"+i+"'></div>"),o.append("<div class='ut-comparison-overlay'></div>");var u=o.find(".ut-comparison-overlay");t.before_label&&u.append("<div class='ut-comparison-before-label' data-content='"+t.before_label+"'></div>"),t.after_label&&u.append("<div class='ut-comparison-after-label' data-content='"+t.after_label+"'></div>");var s=o.find("img:first"),d=o.find("img:last"),l=o.find(".ut-comparison-before-label"),f=o.find(".ut-comparison-after-label");o.append("<div class='ut-comparison-handle'></div>");var m=o.find(".ut-comparison-handle");m.append("<span class='ut-comparison-"+a+"-arrow'></span>"),m.append("<span class='ut-comparison-"+c+"-arrow'></span>"),o.addClass("ut-comparison-container"),s.addClass("ut-comparison-before"),d.addClass("ut-comparison-after");var v=function(e){var t=function(e){var t=s.width(),n=s.height();return{w:t+"px",h:n+"px",cw:e*t+"px",ch:e*n+"px"}}(e);m.css("vertical"===i?"top":"left","vertical"===i?t.ch:t.cw),function(e){"vertical"===i?(s.css("clip","rect(0,"+e.w+","+e.ch+",0)"),d.css("clip","rect("+e.ch+","+e.w+","+e.h+",0)"),l.css("clip","rect(0,"+e.w+","+e.ch+",0)"),f.css("clip","rect("+e.ch+","+e.w+","+e.h+",0)")):(s.css("clip","rect(0,"+e.cw+","+e.h+",0)"),d.css("clip","rect(0,"+e.w+","+e.h+","+e.cw+")"),l.css("clip","rect(0,"+e.cw+","+e.h+",0)"),f.css("clip","rect(0,"+e.w+","+e.h+","+e.cw+")")),o.css("height",e.h)}(t)},p=function(e,t){return function(e,t,n){return Math.max(t,Math.min(n,e))}("vertical"===i?(t-g)/X:(e-h)/w,0,1)};e(window).on("resize.utcomparison",function(e){v(n)});var h=0,g=0,w=0,X=0,Y=function(e){(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&"vertical"!==i?e.preventDefault():(e.distX<e.distY&&e.distX<-e.distY||e.distX>e.distY&&e.distX>-e.distY)&&"vertical"===i&&e.preventDefault(),o.addClass("active"),h=o.offset().left,g=o.offset().top,w=s.width(),X=s.height()},b=function(e){o.hasClass("active")&&(n=p(e.pageX,e.pageY),r>n?"horizontal"===i?o.removeClass("ut-comparison-right").addClass("ut-comparison-left"):o.removeClass("ut-comparison-bottom").addClass("ut-comparison-top"):"horizontal"===i?o.removeClass("ut-comparison-left").addClass("ut-comparison-right"):o.removeClass("ut-comparison-top").addClass("ut-comparison-bottom"),r=n,v(n))},y=function(){o.removeClass("active")},_=t.move_with_handle_only?m:o;_.on("movestart",Y),_.on("move",b),_.on("moveend",y),t.move_slider_on_hover&&(o.on("mouseenter",Y),o.on("mousemove",b),o.on("mouseleave",y)),m.on("touchmove",function(e){e.preventDefault()}),o.find("img").on("mousedown",function(e){e.preventDefault()}),t.click_to_move&&o.on("click",function(e){h=o.offset().left,g=o.offset().top,w=s.width(),X=s.height(),n=p(e.pageX,e.pageY),v(n)}),e(window).trigger("resize.utcomparison")})}}(jQuery);